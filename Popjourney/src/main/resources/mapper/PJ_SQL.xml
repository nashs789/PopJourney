<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="PJ">
	<select id="login" parameterType="hashmap" resultType="hashmap">
		SELECT MEM_NO, GRADE_NO, NIC
		FROM MEM
		WHERE ID = #{inputID} AND PW = #{inputPW}
	</select>
	
	<select id="IDDbCk" parameterType="hashmap" resultType="hashmap">
		SELECT MEM_NO
		FROM MEM
		WHERE ID = #{storage}
	</select>
	
	<select id="nicDbCk" parameterType="hashmap" resultType="hashmap">
		SELECT MEM_NO
		FROM MEM
		WHERE NIC = #{storage}
	</select>
	
	<insert id="join" parameterType="hashmap"> <!-- 사진경로 넣어야함 -->
		INSERT INTO MEM(MEM_NO, ID, PW, PHONE, EMAIL, EMAIL_CONFIRM, NAME, TELCOM,
         			    NIC, INTRO, BIRTH, SEX, KEYWORD_NO, MARKETING, JOIN_DATE, KEYWORD)
		VALUES(MEM_SEQ.NEXTVAL, #{inputID}, #{inputPW}, #{phone}, #{email}, #{inputCode}, #{inputName},
			   #{selectTelcom} ,#{inputNic}, #{inputIntro}, #{birth}, #{sex}, #{selectKeyword},
			   #{marketing}, SYSDATE, #{inputKeyword})
	</insert>
	
	<select id="findID" parameterType="hashmap" resultType="hashmap">
		SELECT MEM_NO, NAME, ID, SUBSTR(ID, 0, 2)AS FIRST, SUBSTR(ID, LENGTH(ID)-1, 2)AS LAST
		FROM MEM
		WHERE NAME = #{inputName}
		AND EMAIL = #{email}
		AND KEYWORD_NO = #{selectKeyword} 
		AND KEYWORD = #{inputKeyword}
	</select>
	
	<select id="findPW" parameterType="hashmap" resultType="hashmap"> 
		SELECT MEM_NO
		FROM MEM
		WHERE NAME = #{inputName}
		AND ID = #{inputID}
		AND EMAIL = #{email}
		AND KEYWORD_NO = #{selectKeyword} 
		AND KEYWORD = #{inputKeyword}
	</select>
</mapper>